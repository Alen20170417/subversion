This branch implements the 'invoke-merge-cmd' feature and is located at 
https://svn.apache.org/repos/asf/subversion/branches/invoke-merge-feature/

It is a continuation of the invoke-diff-cmd-feature branch, which is
located here:

https://svn.apache.org/repos/asf/subversion/branches/invoke-diff-cmd-feature/

It is a feature branch, receiving regular sync merges from /trunk, and
expected to be reintegrated back thereto.

See: http://subversion.tigris.org/issues/show_bug.cgi?id=2044 for the
original motivation for this project.


======================================================================
        INVOKE-MERGE-CMD SECTION
======================================================================

--invoke-merge-cmd allows command line, config file and interactive
selection of an external merge program.

Currently this capability is provided by user written shell scripts
which are passed as the merge program via the svn config file.

What --invoke-merge-cmd provides
================================

Users can type 'free-style' command lines for their selected merge
program, define a default command in the config file and also,
interactively select a merge program during the merge conflict
dialogue.


Structure of the feature:
=========================

API components 
--------------

TBD

UI components
-------------

#  --invoke-diff-cmd and its user interface components for the command
#  line have been installed everywhere where --diff-cmd is available,
#  in svnlook.c, svn.c, svnlog.c.

& Users can specify the following mutually exclusive options:

  --invoke-merge-cmd, --diff3-cmd , and also define what diff3 program
  to use via the ./svn/config file, using the new config file
  parameter "invoke-merge-cmd"..

  The selection first defaults to the config file entry (if defined)
  which in turn is overridden when one of --invoke-merge-cmd,
  --diff-cmd are invoked.


Changes to the existing code structure:
=======================================

None.

The existing --diff3-cmd has been in use for years and is best left
untouched, since many users will not require the extra services
offered by the --invoke-diff3-cmd feature, and any errors could cause
many users a lot of problems.  

Moreover, the nature of --invoke-diff3-cmd and --diff-cmd are quite
different; --diff-3 is tailored for GNU diff3 and carefully checks the
user's input of switches, whereas --invoke-diff3-cmd is a
free-style-anything-goes-including-shooting-your-foot creation.


Tests
=====

Correct functionality
---------------------
TBD

Working copy functionality
--------------------------

Create a suitable conflict to test the UI part of the feature:
       
    mkdir conflict
    svn co -r r1526439  https://svn.apache.org/repos/asf/subversion/trunk/ trunk
    svn co -r r1502389 https://svn.apache.org/repos/asf/subversion/branches//invoke-diff-cmd-feature branch
    cd branch
    svn /home/g/conflict/trunk 
    revert -R .

The above produces 2 conflicts using the native svn merge command, and
30 conflicts when kdiff3 is used.

$ kdiff3 --version
Qt: 4.8.4
KDE Development Platform: 4.10.5
kdiff3: 0.9.97 (32 bit)


TODO:
====

  * write help info

  * Create the UI for the interactive dialogue in
    subversion/svn/conflict-callbacks.

    Proposed interactive dialoge entry:

    (3f) - use diff3 tool defined in the config file to resolve conflict 
    (3c) - use diff3 tool defined in the commandline to resolve conflict 
    (3i) - interactively select diff3 tool now to resolve conflict  

  * make list of where else in svn to add the invoke-merge-cmd.
   - svn cleanup

  * config file service:
    plug in config file service into io.c
    add new entry in config file

  * ask on svn-dev how to create a suitable python test.
