     * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     *                                                     *
     *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
     *                                                     *
     * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.5.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.


Candidate changes for 1.5.7:
============================

 * r36106
   Resolves issue #3374, "svn cp --parents path URL encoding issues"
   For
     svn cp --parent ^/fö ^/dö/fö
   The --parents code checked and might creat^/d%C3%B6, while the file was
   copied to ^/dö as expected.
   Justification:
     Without this patch --parents is broken for utf8 characters in repos
     to repos copy and move operations.
   Votes:
     +1: rhuijben
     -0: gstein (encoding issues are tricky; I'd rather tell people to
                 upgrade to 1.6.0, rather than 1.5.6)

 * r36111
   On Windows don't retry deleting a file 100 times when this file is really
   not a file but just a directory.
   Justification:
     Makes removing unversioned directories much faster.
     (You can see the delay with: svn rm --force <unversioned-empty-directory>)
   Votes:
     +1: rhuijben
     -0: gstein (edge case performance fixes shouldn't be backported; if
                 the user wants the fix, they can upgrade to 1.6.0 rather
                 than 1.5.6)

 * r36527
   Yet another merge performance improvement: Potentially reduce server
   queries about subtree mergeinfo during reverse merges.
   Justification:
     Large numbers of subtrees with mergeinfo can significantly slow merge
     performance, this alleviates that somewhat in a common use case.
   Votes:
     +1: pburba

 * r36730, r36766, r36775
   Fix issue #3383 'Foreign repository merge can add mergeinfo from the
   foreign repos'
   Justification:
     At best this mergeinfo refers to non-existent paths in the target's
     repos.  At worst the mergeinfo intersects with actual path/revisions
     in the merge target.  The latter might cause real problems, making it
     appear merges have been done that actually have not or vice-versa.
   Notes:
     r36775 is the fix, the other revisions are expansion of an existing
     merge test to cover this issue.  There are some minor conflicts, a
     backport branch can be found at
     http://svn.collab.net/repos/svn/branches/1.5.x-r36775.
   Votes:
     +1: pburba, arfrever

 * r37072, r37083
   Fix issue #3392 'Parsing error with reverse merges and non-inheritable
   mergeinfo'
   Justification:
     Can cause repeat merges to break in the presence of non-inheritable
     mergeinfo.
   Notes:
     r37072 is a test for the issue, r37083 is the fix.  There is a backport
     branch at http://svn.collab.net/repos/svn/branches/1.5.x-issue3392, but
     it is dependent on r36879 being merged first.  (If this change *must* be
     merged before r36879 I'll create a branch to do so - pburba)
   Votes:
     +1: pburba, arfrever

 * r37137
   Make some sweeping pool lifetime fixes in the BDB backend.
   Justification:
     Bringing 'svn ls -v' over HTTP on a directory with 10000 files
     from 2Gb+ of RAM to under 400Mb is a very good thing.
   Notes
     The merge conflicts in a few places due to some minor cleanups
     performed post-1.5.x.  A backport branch resolving it can be
     found here:
     http://svn.collab.net/repos/svn/branches/1.5.x-r37137
   Votes:
     +1: cmpilato, arfrever

 * r37768
   Make svnadmin load tolerate mergeinfo with "\r\n".
   Justification:
     Prior to this change you cannot load a dump file that contains Windows
     style newlines in svn:mergeinfo.  See
     http://svn.haxx.se/dev/archive-2009-05/0179.shtml.
   Votes:
     +1: pburba, cmpilato

 * r37779
   Fix a potential segfault when doing noop file merges.
   Justification:
     Not common, but a segfault is a segfault.  See
     http://svn.haxx.se/dev/archive-2009-05/0363.shtml.
   Notes:
     There are text conflicts in both merge.c and merge_tests.py, a
     backport branch resolving these can be found at:
     http://svn.collab.net/repos/svn/branches/1.5.x-r37779.
   Votes:
     +1: pburba

 * r38068
   Fix issue #3119, "File '...' already exists" when it obviously doesn't,
   during commit.
   Justification:
     This was introduced in 1.5.1 and propagated till now.
   Votes:
     +1: stylesen

Approved changes:
=================

* r36851, r36857
   'svnadmin upgrade'-ing pre-1.2 repositories fails for lack of
   'db/format' file.
   Justification:
     'svnadmin upgrade' was designed to allow for this situation, but clearly
     does not.
   Notes:
     Backport branch needed, the function in question has seen a lot of churn.
   Votes:
     +1: cmpilato, danielsh, rhuijben
     -0: hwright (until such time as a backport branch exists)

 * r37117
   Fix issue #3393 'Merge consuming too much memory'.
   Justification:
     A merge which targets a WC with thousands of subtrees with mergeinfo
     can consume multiple GB of memory in a hurry.
   Notes:
     This is as simple a fix to review as you've ever seen with the
     word 'merge' in the title (though as gstein points out, the
     function this change is in desperately needs a dose of clarity).
   Votes:
     +1: pburba, hwright, cmpilato
