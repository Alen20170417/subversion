     * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     *                                                     *
     *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
     *                                                     *
     * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.5.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.


Candidate changes for 1.5.7:
============================

 * r36106
   Resolves issue #3374, "svn cp --parents path URL encoding issues"
   For
     svn cp --parent ^/fö ^/dö/fö
   The --parents code checked and might creat^/d%C3%B6, while the file was
   copied to ^/dö as expected.
   Justification:
     Without this patch --parents is broken for utf8 characters in repos
     to repos copy and move operations.
   Votes:
     +1: rhuijben
     -0: gstein (encoding issues are tricky; I'd rather tell people to
                 upgrade to 1.6.0, rather than 1.5.6)

 * r36111
   On Windows don't retry deleting a file 100 times when this file is really
   not a file but just a directory.
   Justification:
     Makes removing unversioned directories much faster.
     (You can see the delay with: svn rm --force <unversioned-empty-directory>)
   Votes:
     +1: rhuijben
     -0: gstein (edge case performance fixes shouldn't be backported; if
                 the user wants the fix, they can upgrade to 1.6.0 rather
                 than 1.5.6)

 * r36527
   Yet another merge performance improvement: Potentially reduce server
   queries about subtree mergeinfo during reverse merges.
   Justification:
     Large numbers of subtrees with mergeinfo can significantly slow merge
     performance, this alleviates that somewhat in a common use case.
   Votes:
     +1: pburba

 * r36730, r36766, r36775
   Fix issue #3383 'Foreign repository merge can add mergeinfo from the
   foreign repos'
   Justification:
     At best this mergeinfo refers to non-existent paths in the target's
     repos.  At worst the mergeinfo intersects with actual path/revisions
     in the merge target.  The latter might cause real problems, making it
     appear merges have been done that actually have not or vice-versa.
   Notes:
     r36775 is the fix, the other revisions are expansion of an existing
     merge test to cover this issue.  There are some minor conflicts, a
     backport branch can be found at
     http://svn.collab.net/repos/svn/branches/1.5.x-r36775.
   Votes:
     +1: pburba, arfrever

 * r37072, r37083
   Fix issue #3392 'Parsing error with reverse merges and non-inheritable
   mergeinfo'
   Justification:
     Can cause repeat merges to break in the presence of non-inheritable
     mergeinfo.
   Notes:
     r37072 is a test for the issue, r37083 is the fix.  There is a backport
     branch at http://svn.collab.net/repos/svn/branches/1.5.x-issue3392, but
     it is dependent on r36879 being merged first.  (If this change *must* be
     merged before r36879 I'll create a branch to do so - pburba)
   Votes:
     +1: pburba, arfrever

 * r37117
   Fix issue #3393 'Merge consuming too much memory'.
   Justification:
     A merge which targets a WC with thousands of subtrees with mergeinfo
     can consume multiple GB of memory in a hurry.
   Notes:
     This is as simple a fix to review as you've ever seen with the
     word 'merge' in the title (though as gstein points out, the
     function this change is in desperately needs a dose of clarity).
   Votes:
     +1: pburba, hwright

 * r37137
   Make some sweeping pool lifetime fixes in the BDB backend.
   Justification:
     Bringing 'svn ls -v' over HTTP on a directory with 10000 files
     from 2Gb+ of RAM to under 400Mb is a very good thing.
   Notes
     The merge conflicts in a few places due to some minor cleanups
     performed post-1.5.x.  A backport branch resolving it can be
     found here:
     http://svn.collab.net/repos/svn/branches/1.5.x-r36919
   Votes:
     +1: cmpilato, arfrever

 * r37156
   Make default depth of merge infinity, rather than the depth of target.
   Justification:
     Is it technically a bug?  Dunno, but there is nothing but confusion
     regarding the old behavior, see
     http://svn.haxx.se/dev/archive-2009-04/0328.shtml and
     http://svn.haxx.se/dev/archive-2009-03/0701.shtml.
   Notes:
     Changes to the merge tests in r37156 expect tree conflicts which
     obviously don't exist in 1.5.x.  Created a backport branch at
     http://svn.collab.net/repos/svn/branches/1.5.x-r37156 which adjusts
     the test to expect skips rather than tree conflicts.
   Votes:
     +1: pburba, arfrever

 * r37169
   Update --set-depth infinity should expand shallow subtrees.
   Justification:
     update --set-depth infinity won't actually update the target's
     shallow subtrees without this change.
   Notes:
     The test added in r37169 uses update --set-depth to make subtrees
     in a WC shallow, but 1.5.x does not support shallowing of WC depths.
     A backport branch can be found at
     http://svn.collab.net/repos/svn/branches/1.5.x-r37169 which makes
     minor adjustments to the test to work around this limitation.  These
     adjusments affect *only* the setup of the test.
   Votes:
     +1: pburba, arfrever

 * r37385
   Return an error if attempting to reintegrate from/to the repository root.
   Justification:
     A descriptive error is a lot better than a cryptic assertion, see
     http://svn.haxx.se/dev/archive-2009-04/0623.shtml.
   Votes:
     +1: pburba, arfrever

  * r37646, r37656
   Fix a segfault in WC to URL copy.
   Justification:
     Segfaults are always bad.
   Notes:
     r37646 is the fix, r37656 is a follow up to clear iterpool.
     Merging r37646, conflicts in subversion/libsvn_client/copy.c, a backport
     branch resolving it can be found here:
     http://svn.collab.net/repos/svn/branches/1.5.x-r37646
   Votes:
     +1: stylesen, arfrever

Approved changes:
=================

* r36851, r36857
   'svnadmin upgrade'-ing pre-1.2 repositories fails for lack of
   'db/format' file.
   Justification:
     'svnadmin upgrade' was designed to allow for this situation, but clearly
     does not.
   Notes:
     Backport branch needed, the function in question has seen a lot of churn.
   Votes:
     +1: cmpilato, danielsh, rhuijben
     -0: hwright (until such time as a backport branch exists)

 * r36879
   Fix a merge bug which can occur when the merge target or a subtree of
   the target has non-inheritable mergeinfo.
   Justification:
     I don't know that anyone has encountered this problem in the wild, but
     the code is clearly incorrect and r36879 expands an existing merge
     test to demonstrate how it could result in incorrect mergeinfo.
   Notes:
     There are a few minor conflicts in merge_tests.py, a backport branch
     resolving these can be found here:
     http://svn.collab.net/repos/svn/branches/1.5.x-r36879
   Votes:
     +1: pburba, rhuijben, arfrever

 * r36919
   Fix issue #3250 'Repeated merging of conflicting properties fails'.
   Justification:
     This issue was introduced in 1.5.x.
   Notes:
     The merge, conflicts in subversion/libsvn_wc/props.c, a backport branch
     resolving it can be found here:
     http://svn.collab.net/repos/svn/branches/1.5.x-r36919
   Votes:
     +1: stylesen, rhuijben, arfrever
