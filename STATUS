      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.8.x line.

See http://subversion.apache.org/docs/community-guide/releasing.html#release-stabilization
for details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.8.1:

Candidate changes:
==================

 * r1469519, r1469520, r1481848, r1481870
   Silence compiler warnings, tighten scopes and improve code.
   Justification:
     Clean builds make it more likely to notice real compiler warnings.
   Branch: ^/subversion/branches/1.8.x-r1469519-and-friends
   Votes:
     +1: blair, brane
     -0: philip (see dev thread: false alarm, trades one warning for another)

 * r1491868, r1494657
   Add missing conflict callback invocations to the update editor.
   Justification:
     Resolver is not invoked after some updates which flag new tree conflicts.
   Votes:
     +1: stsp, rhuijben, breser

 * r1491756
   Fix issue #4364: Correctly remove the stale entries from the lock table
   when committing deletions.
   Justification:
     Keep wc.db as consistent and clean as possible.
   Votes:
     +1: rhuijben, stsp, breser
     +1 (nonbinding): schabi

 * ^/subversion/branches/1.8.x-r1495063
   r1495806, r1495985
   Fix crash in FSFS DAG caching code on strict-alignment architectures.
   Also, improve hash hash effectiveness and efficiency.
   Justification:
     FSFS shouldn't crash.
     See http://svn.haxx.se/dev/archive-2013-06/0432.shtml
   Branch: 1.8.x-r1495063
   Notes:
     It took a while to figure out the "right way" to fix the hash function.
     The branch takes all the individual back-and-forth changes and combines
     them into one small patch.
   Votes:
     +1: stefan2, stsp

 * r1495329, r1499403
   Fix symlink for svnmucc in svn-tools.
   Justification:
     Makes 'make install-tools' work when DESTDIR is set.
   Votes:
     +1: philip (without r1499403), breser
     +1: danielsh, stsp

 * r1496007, r1496111
   Fix issue #4383, "Subversion 1.8.0 crash when WC path is symlink"
   Justification:
     Crash, regression from 1.7.
   Votes:
     +1: stsp, breser
     +0: rhuijben (looks good)

 * r1496470
   Add runtime configuration option to control using of chunked transfer
   encoding for HTTP requests body.
   Branch: ^/subversion/branches/1.8.x-r1496470
   Justification:
     Workaround for issue with busted proxies that don't support chunked
     transfer encoding for request body. Reported many times on mailing list.
   Notes:
     This revision is part of the 1.8.x-busted-proxy branch and so this
     proposal becomes redundant if that branch is merged.
   Votes:
     +1: ivan
     -0: gstein, brane, breser (we should dynamically detect the problem; should fix name)

 * r1498483, r1498484, r1498486
   fs: Improve a regression test.
   Notes:
     r1498483 adds a helper function.
     r1498484 extends the test to perform additional verifications, and
       switches it to a blacklist approach.
     r1498486 renames a local variable; no functional change.
   Justification:
     Makes the test more likely to exercise the bug.
   Votes:
     +1: danielsh, stefan2, breser
     -0: stsp (I don't really see a reason for backporting this.
               I don't think this test will ever find a regression in 1.8.x
               which we won't find on trunk. Having these changes in trunk
               is good of course.
               <danielsh>  Let's not assume that all bugs that occur in 1.8.x
               also occur in trunk; we have had counterexamples in our history.
               Agreed though that the crash fixers elsewhere in the file are
               more important to have.)

 * r1499034, r1500175
   sqlite3.m4: allow placing the amalgamation in the build dir.
   Justification:
     It is not present in the extracted source tarball, so doesn't belong in
     the source dir.
   Votes:
     +1: danielsh, breser

 * r1499064
   Fix issue #4387, svn merge --record-only errors out on renamed path.
   Justification:
     Record-only merge shouldn't be flagging tree conflicts.
     Regression from 1.7.
   Votes:
     +1: stsp, rhuijben, breser

 * r1500226
   Fixes copyfrom URL construction in Ev2 commit editor shims.
   Justification:
     Makes Ev2 shims work for commit via (at least) ra_serf.
   Notes:
     See note under r1498885, above.
   Votes:
     +1: brane, breser
      0: rhuijben (Ev2 shims aren't used by production code. (-0)
                   Only by JavaHL 1.7/1.8 extensions branch (+0))

 * r1498000
   Improve error handling for inherited property requests by using the
   transition based xml parser in libsvn_ra_serf.
   Justification:
     This maintenance work which usually doesn't belong in a patch release
     makes it possible to properly detect if this request should be restarted
     on non-chunk-enabled proxies.
   Votes:
     +1: rhuijben, ivan
 * r1496127
   Fix occasional failure of checkout_tests.py 12.
   Justification:
     Spurious FAILs confuse people testing the release.
   Votes:
     +1: philip, rhuijben
     -0: danielsh (loses functionality; patch sent with alternative fix)
     stsp: where exactly is the alternative patch?
     danielsh: dev@, subject "checkout_tests", Friday 5 Jul

 * r1500762, r1500799, r1500802
   Make gpg-agent password store verify that a usable GPG agent exists.
   Justification:
     gpg-agent password store might lie about having stored passwords
     which breaks password caching in the default configuration.
     See http://svn.haxx.se/users/archive-2013-07/0093.shtml
   Notes:
     r1500762 is the first part of the fix.
     r1500799 fixes the fix by not requiring GPG_TTY to be set (we cannot
              assume that GPG_TTY will always be set, but we can require
              a running agent).
     r1500802 fixes a build warning introduced in r1500799
   Votes:
     +1: stsp, danielsh

 * r1499100, r1499483, r1499492, r1499496, r1499498
   Allow configuration files with an UTF-8 Byte Order Mark.
   Justification:
     Make it easier for users, particularly those on Windows using notepad,
     which will only save UTF-8 encoded text files with a BOM.
   Votes:
     +1: breser, breser

Veto-blocked changes:
     +1: breser
=====================

Approved changes:
=================

 * r1498885
   Correctly initialize the node kind in the Ev2 shims' change table.
   Justification:
     Fixes a bug introduced bu the svn_kind_t -> svn_node_kind_t merge
     from r1455559, making the shims work again.
   Notes:
     I [brane] realise that this is an unusual backport request;
     the motivation is to make the JavaHL extensions backported to the
     javahl-1.8-extensions branch work with stock 1.8.x binary distros.
     Incidentally, that backport will serve as a real-life test of the
     Ev2 API, as that is what JavaHL exposes.
   Votes:
      +1: brane, gstein, stsp

 * r1491816, r1494089
   Add two additional options to interactive file merge.
   Justification:
     Usability enhancement for quicker conflict resolution in some cases.
     Very simple change. Only affects interactive mode, not scripts.
   Votes:
     +1: stsp, danielsh, stefan2

 * r1500680
   Use local style for paths in error messages for 'svn diff --old A --new B'
   Justification:
     Errors show paths with wrong separators on some platforms.
   Votes:
     +1: stsp, danielsh, stefan2

 * r1491739, r1491755, r1491762, r1492152
   Improve interactive conflict resolution menu.
   Justification:
     The current menu is too hard to figure out for users.
     See http://svn.haxx.se/dev/archive-2013-06/0147.shtml
     and http://blog.elegosoft.com/?q=updating-moves-in-subversion-18-just-ask
   Votes:
     +1: stsp, danielsh, ivan

 * r1500074
   Format a path correctly in an error message.
   Justification:
     The error message includes a path not related to the working copy
   Votes:
     +1: danielsh, stsp, ivan

 * r1498851
   Provide an explicit error in the serf xml parser when the root element
   isn't matched in the transition table.
   Notes:
     This turns a class of previously invisible errors in an easy to diagnose
     error message.
   Votes:
     +1: rhuijben, gstein, ivan

 * r1499438, r1499447, r1499460, r1500695
   Make building with BDB 6 an opt-in feature.
   In configure, do not warn if BDB was not found.
   Justification (r1499447):
     The BDB backend is deprecated and the check is buggy.
   Justification (r1499438, r1499460):
     License change on a dependency.  libsvn_fs_base has not been tested with
     bdb6, and is deprecated so we are unlikely to test it.
   Notes:
     Two orthogonal changes that conflict with each other.
     r1499447 removes the warning.
     r1499438 and r1499460 add an opt-in
   Votes:
     +1: stsp, danielsh, stefan2

 * r1497310
   Backport 'svn help cleanup' improvements made in r1497310.
   Justification:
     The current output doesn't explain what the command actually does.
   Branch: ^/subversion/branches/1.8.x-r1497310-partial
   Votes:
     +1: stsp, danielsh, stefan2

 * r1488693, r1490721
   (Perl bindings) Documentation fixes: document some SVN::Client methods
   and at least list all wrapped -though still undocumented - methods.
   Justification:
     Save users from staring at the Perl source, trying to figure out
     what is wrapped.
   Votes:
     +1: rschupp
     +1: danielsh (r1488693)
     +0: danielsh (r1490721)

 * r1498449, r1498455, r1498997
   kidney blame: convert a client segfault into a correct failure mode.  To
   reproduce run 'svn blame -r 2:1' against a 1.7 server with a 1.8.x binary.
   Notes:
     r1498449 breaks out a helper function
     r1498455 fixes the segfault.
     r1498997 is a minor optimisation
   Justification:
     Segfault.  (1.8.0 didn't have the segfaulting code.)
   Votes:
     +1: danielsh, stsp, rhuijben

 * r1500801
   Don't require GPG_TTY and TERM when getting passwords from gpg-agent.
   Justification:
     Requiring those variables can prevent some gpg-agent setups from working.
     We cannot assume that everyone using gpg-agent is also using a TTY.
   Votes:
     +1: stsp, danielsh, rhuijben

 * r1489117, r1496470, r1497975, r1497980, r1498012, r1499423, r1499595
   Support for HTTP/1.1 reverse proxies that require Content-Length headers
   and deny chunked requests.
   Branch: ^/subversion/branches/1.8.x-busted-proxy
   Justification:
     Older nginx servers cannot handle chunked requests. This patch will
     keep HTTP/1.1 features in the connection, but will always use C-L
     headers for the length (at a variant performance cost). This increases
     svn's compatibility in various environments. Most installations will
     never see this; the runtime test is only enabled with a config settting.
   Notes:
     r1489117: this is actually unrelated to the proxy work, but it removes
               some redundant minimum-serf-version checking and allows the
               actual work to cleanly merge.
     r1496470: add/respect using_chunked_requests flag to session state
     r1497975: rename config variable, tweak session variables
     r1497980: add runtime/dynamic checking of proxy support
     r1498012: remove improper check of client-side proxy; the real problem
               is within the server-side reverse proxy
     r1499423: fix 411 handling
     r1499595: don't probe when a redirect occurs
     
     Local to branch:
     r1499225: remove SVN_CONFIG_OPTION_BUSTED_PROXY from the public API,
               since we cannot add a symbol in a patch release.
   Votes:
     +1: gstein, philip, lgo

 * r1500837
   Follow up to the r1489117 group, modifies the 411 Content length required
   error message to point the user to the busted-proxy option.
   Justification:
     The original error message was meaningless, this patch at least guides
     the user in the right direction.
   Notes:
     Depends on the r1489117 group (logically, not merge-wise).
   Votes:
     +1: lgo, rhuijben, danielsh

 * r1500857
   A further clarification after r1500837
   Justification:
     Save users a tour to $SEARCH_ENGINE.
   Votes:
     +1: danielsh, lgo
     +1: rhuijben (but also +1 on not applying it if that would be the
                   consensus)

