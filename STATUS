      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.8.x line.

See http://subversion.apache.org/docs/community-guide/releasing.html#release-stabilization
for details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.8.9:

Candidate changes:
==================

 * r1469519, r1469520, r1481848, r1481870
   Silence compiler warnings, tighten scopes and improve code.
   Justification:
     Clean builds make it more likely to notice real compiler warnings.
   Branch: ^/subversion/branches/1.8.x-r1469519-and-friends
   Votes:
     +1: blair, brane
     -0: philip (see dev thread: false alarm, trades one warning for another)

 * r1501293, r1501338, r1501360, r1501533
   Fix issue #4390, "parallel nested checkout not possible with wc-ng"
   Justification:
     Regression from 1.6. User complained. See issue for details.
   Branch:
     ^/subversion/branches/1.8.x-issue4390
   Depends:
     Nomination conflicts with the branch and merges cleanly without it.
     Branch should probably be removed from the nomination (it was only needed
     before r1503552).
   Votes:
     +1: stsp
     -0: ivan, brane (not regression from 1.7.x,
                      destructive change in libsvn_wc core)
     -0: rhuijben (temporarily remove my +1 until I complete investigating
                   a related problem. It looks like this fix doesn't work for
                   the user scenario it was intended for)

 * r1531014, r1532316, r1536350, r1536383, r1536464, r1536488, r1567204, r1567228
   Fix working copy database inconsistency on certain move scenarios,
   including those described in issue #4437 "Deleting a moved file can maintain a
   half move"
   Justification:
     The working copy database should be consistent on any normal operation.
   Branch:
     ^/subversion/branches/1.8.x-issue4437
   Votes:
     +1: rhuijben, philip

 * r1518942, r1536914, r1536931
   Fix commit of a specific mixed revision copy with non copy descendants that
   shadow not present nodes. This problem manifests itself as a copy of a tree
   that can't be committed because it is reported out of date.
   Justification:
     'svn cp TREE NEW-TREE; svn ci NEW-TREE' should never report out of date
     on some random descendant.
   Branch: ^/subversion/branches/1.8.x-r1536931
   Votes:
     +1: rhuijben, philip

 * r1536854
   Make 'svnadmin verify' detect inconsistencies that will prevent loading
   dump files.
   Justification:
     Some users rely on dump files as a means of repository backup.  Without
     this patch, there is no way except of 'svnadmin load' to know that these
     dump files will load at all.  With this patch, a successful verify run
     should guarantee loadable dump files.
   Branch: ^/subversion/branches/1.8.x-r1536854
   Votes:
     +1: stefan2

 * r1538812, r1538925, r1538928, r1538939
   Properly remove moved_to information when the node in its original location
   is removed.
   Justification:
     The NODES table in the working copy database should always be consistent.
   Notes:
     rhuijben: The test for this problem might accidentally depend on other
               move fixes on trunk.
   Votes:
     +1: rhuijben, philip

 * r1542610, r1564576, r1568180
   Add missing description to build.conf, to properly generate a version
   resource (including icon) for this executable on Windows.
   Notes:
     r1564576 breaks compilation on Visual Studio 2010, 2012 and 2013 of
     this project. r1568180 fixes this problem.
   Votes:
     +1: rhuijben, breser
     +1: (without r1564567, r1568180): stsp
     -0: brane (horrible grammar; suggest translation to English)

 * r1544597, r1544600, r1544688, r1544690, r1545111, r1545122
   Fix a specific case where the api behind status would report a different
   move status for A depending on whether the user called 'svn status A' or
   'svn status wc' and then looked at 'wc/A'.
   Justification:
     Api users such as AnkhSVN rely on the result of svn status to match and
     this breaks their assumptions.
     This change has the nice side effect that it resolves the most common
     user triggerable assertion in AnkhSVN, which is really caused by a
     broken move. (See other nomination for a fix). But even then it shouldn't
     matter how status is called: on the node or an ancestor.
     (It also improves status performance a tiny bit, by reducing the number
      of sqlite transactions used)
   Notes:
     r1564587 fixes a function reference on the branch in some code that
     is disabled by the macro processor on Windows.
   Branch:
     ^/subversion/branches/1.8.x-r1544597
   Votes:
     +1: philip, rhuijben

 * r1555491
   Fix svn_fs_close_root for FSFS transaction roots.
   Justification:
     Without this patch, cache-related pool cleanups may be run after the
     svn_fs_t object has been destroyed.  I.e. even with explicit calls to
     svn_fs_close_root, the user may see a segfault.
   Branch:
     ^/subversion/branches/1.8.x-r1555491
   Votes:
     +1: stefan2
     -0: philip, rhuijben (Seems to be a different name for the same pool?)

 * r1547454
   In FSFS, omit config file when creating pre-1.5 format repositories.
   Justification:
     Old SVN versions won't preserve this file in hotcopy.  Later versions
     might also behave inconsistently in the presence of this file if their
     feature availability check is incomplete.
   Votes:
     +1: stefan2
     -0: rhuijben (Might require r1561703 to avoid breaking tests)

 * r1561426
   In FSFS, skip the generation of uniquifiers if rep-shared is no supported.
   Branch: ^/subversion/branches/1.8.x-r1561426
   Justification:
     This is not known to be a bug, atm, as we omit these when we write the
     final revisions.  But we rely on those uniquifiers to be NULL in old
     repo formats when we compare reps.  Them being non-NULL in a txn might
     cause problems with future changes.
   Votes:
     +1: stefan2

 * r1567996, r1568009, r1568062, r1568063
   Fix a caching inefficiency in multi-threaded servers.
   Justification:
     .
   Notes:
     Due to going back and forth with different approaches to solve this
     issue, the best way to review this 
   Branch:
     ^/subversion/branches/1.8.x-r1567996
   Votes:
     +1: stefan2
     -0: rhuijben (incomplete (misses cache->total_reads accesses) and
                   overkill. The whole thing can be implemented with simple
                   atomic operations while mutexes may be a limited resource)

 * r1575525, r1575915
   Resolve issue #4427: File externals can't be exported.
   Justification:
     File externals 'are just files', so why should they be discriminated
     by export?
   Notes:
     r1575525 resolves the most important issues, but in some cases still
     doesn't allow exporting file externals. r1575915 simplifies the fix and
     resolves a few remaining issues.
   Votes:
     +1: rhuijben

 * r1577151
   Make 'svn merge' honor the 'preserved-conflict-file-exts' setting.
   Justification:
     While really a behavior change that doesn't belong in a patch release
     I'm guessing nobody knew that we didn't implement this flag in this
     scenario.
   Votes:
     +1: rhuijben, steveking

 * r1578273, r1578311, r1578326
   Make svn_ra_get_locks() and svn_ra_get_lock() report not locked nodes
   with a NULL svn_lock_t *, as documented.
   Justification:
     Many clients use the existence of an svn_lock_t on a node via info/status
     as a boolean to note that there is a lock. But because we didn't properly
     check the result we reported mostly empty svn_lock_t instances in more
     cases. Even on directories!
   Notes:
     A branch is needed, because the serf lock handling code was refactored and
     split to multiple files on trunk.
   Branch:
     ^/subversion/branches/1.8.x-r1578311
   Votes:
     +1: rhuijben, philip

 * r1579588
   ra_serf: Fix 'svn unlock' interop with generic DAV clients that use timeout
   Justification:
     Local fix to resolve user reported issue.
   Notes:
     Branch needed as the lock code was split to multiple files on trunk.
   Branch:
     ^/subversion/branches/1.8.x-r1579588
   Votes:
     +1: rhuijben

 * r1580626, r1580650, r1581430
   Fix 'svn copy URL WC' after the working copy is relocated
   Justification:
     Without this patch (which is a followup of 1560690 backported in 1.8.8),
     descendants of copies in a relocated working copy are marked as incomplete
     (and these nodes are all created at their own op-depth)
   Branch:
     ^/subversion/branches/1.8.x-r1580626
   Votes:
     +1: rhuijben

 * r1573106, r1573209
   A more stringent test for whether the compiler accepts a given option.
   Justification:
     Makes --enable-optimize and --enable-debug work with Solaris CC.
   Votes:
     +1: philip, rhuijben

 * r1581810, 1584342
   Fix issue 4412, locks lost from working copy with pre-1.6.17 servers.
   Justification:
     Regression from 1.7, makes using locks hard.
   Notes:
     r1584342 is the fix, r1581810 is a test that fails with a 1.6.16 server.
   Branch:
     ^/subversion/branches/1.8.x-r1584342
    (merge before ^/subversion/branches/1.8.x-r1584592)
   Votes:
     +1: philip, rhuijben

 * ^/subversion/branches/1.8.x-serf-no-lock-support
   Resolve regression in 'svn ls -v' against mod_dav_svn repositories that
   don't implement the locks report.
   Justification:
     svn ls -v (or the api equivalent) should just work. Regression against
     <= 1.7 and perhaps in some cases early 1.8.x that didn't properly
     check for errors.
   Notes:
     The equivalent patch on trunk was part of a complete error handling
     refactoring.
   Votes:
     +1: rhuijben, philip

 * r1584576, r1584592, r1584745
   Resolve issue #3515 "mod_dav_svn cannot refresh any locks"
   Justification:
     Without this patch generic DAV clients can not refresh their own locks,
     causing them to lose their locks.
   Notes:
     Patch needed, because a plain merge triggers a text conflict while
     removing the XFail marker from the test. r1584745 makes the test code
     compatible with 1.8.
   Branch:
     ^/subversion/branches/1.8.x-r1584592
     (merge from trunk if ^/subversion/branches/1.8.x-r1584342 is merged first)
   Votes:
     +1: rhuijben, philip

 * 1585499
   Build with apr-0.9.x.
   Justification:
     1.8 claims 0.9 support but it doesn't work.
   Branch:
     ^/subversion/branches/1.8.x-apr-0.9
   Votes:
     +1: philip, rhuijben

 * r1587968
   Maintain data[len]=0 invariant for svn_string_t.
   Justification:
     Code may rely on null byte being present.
   Notes:
     Triggers a read beyond allocated memory on trunk but no known
     misbehaviour on 1.8.
   Votes:
     +1: philip, rhuijben

Veto-blocked changes:
=====================

 * r1524145
   Make the 'm' conflict prompt option run external merge tool if configured.
   Justification:
     Usability fix. The current behaviour ('m' -> internal merge tool,
     'l' -> external merge tool) confuses users who try 'm' to run an
     external merge tool. See issue #4426.
   Votes:
     +1: stsp
     -1: breser (see my email to dev@, <5282FE15.40505@reser.org>)

 * r1560723, r1561419, r1561427, r1561428
   Fix the handling of pre-1.4 FSFS repositories.
   Branch: ^/subversion/branches/1.8.x-r1560723-and-friends
   Justification:
     Without this, old SVN versions won't be able to e.g. hotcopy those
     repos once 1.8.x made a commit in them.  Also, fix our hotcopy code
     and make it cope with repositories broken by previous 1.8.x releases.
   Votes:
     +1: stefan2
     -1: ivan (Significant performance degradation for svnadmin hotcopy,
               the root cause is not fixed. Discussion:
               http://svn.haxx.se/dev/archive-2014-01/0158.shtml)

Approved changes:
=================

 * r1577812, r1577813, r1579429
   Resolve a segfault when 'svn merge --force' merges a directory delete
   Justification:
     Even though this merge flag is not recommended, it shouldn't cause a
     segfault.
   Notes:
     r1577812 contains the actual fix and a regression test. r1577813 is
     a minor improvement. A branch is necessary because a comment right above
     the fix contained a typo that was fixed on trunk in a huge commit of many
     typo fixes.
   Branch:
     ^/subversion/branches/1.8.x-r1577812
   Votes:
     +1: philip, rhuijben, julianfoad

 * r1580832
   Resolve 'svnrdump load' segfault deleting an 'svn:*' property (issue #4490)
   Justification:
     Simple fix for a segfault
   Notes:
     r1586668 on trunk is a regression test for this fix. Normally we'd
     backport a regression test along with a fix but others have already
     voted for the fix without it, so, as it's simple, I'm not bothering to
     do so this time.
   Votes:
     +1: rhuijben, ivan, julianfoad

 * r1570642, r1585686, r1586352
   Fix memcached support.
   Justification:
     Enabling memcached causes crashes without these fixes.
     Regression from 1.7.
   Notes:
     Merge with --accept=working to resolve FSX conflict.
   Votes:
     +1: stsp, philip, julianfoad

 * r1578670, r1578820, r1579274, r1587511
   Fix the order of node record headers written by svndumpfilter.
   Justification:
     Makes output match the rules documented in notes/dump-load-format.txt.
   Votes:
     +1: philip, julianfoad, rhuijben

 * r1587946
   Fix variable usage after it is out of scope.
   Justification:
     While not reported by users, this might cause hard to diagnose segfaults.
   Votes:
     +1: rhuijben, philip, steveking

 * r1586439
   Fix a crash in JavaHL that was reported on the users@ list and is
   already fixed on trunk.
   Justification:
     JavaHL should not crash the JVM too often.
   Notes:
     The original report is here:
     http://mail-archives.apache.org/mod_mbox/subversion-users/201404.mbox/%3CCAAVTFFjrZEy-PT3i1xu0mOM_AC89-237CmFEZ7QYcJxNckfEtA%40mail.gmail.com%3E
   Branch:
     ^/subversion/branches/1.8.x-javahl-exception-crash
   Votes:
     +1: brane, rhuijben

 * r1586052, r1586467
   Fix two memory lifetime bugs in the Ruby bindings.
   Justification:
     Ruby bindings tests crash with APR pool debugging enabled.
   Votes:
     +1: stsp
     +0: rhuijben (Looks good. Can't test)
